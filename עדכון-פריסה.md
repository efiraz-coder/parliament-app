# עדכון הפרלמנט בענן – תהליך

אחרי שעשינו שינויים בפרויקט (רפקטור, תיקוני באגים, פיצ'רים), כך מעדכנים את האתר החי בכתובת שבענן.

---

## לפני העדכון – Checklist

- [ ] **משתני סביבה בענן** – וודא שבפלטפורמת הפריסה מוגדרים אותם משתנים כמו ב־`.env.local`:
  - `OPENAI_API_KEY`
  - `DATABASE_URL` (אם יש DB)
  - `GMAIL_USER`, `GMAIL_APP_PASSWORD` (אם יש אימות במייל)
  - `JWT_SECRET`
  - `NEXT_PUBLIC_APP_URL` = כתובת האתר החי (למשל `https://your-domain.com`)
- [ ] **גיבוי** – אם יש DB או נתונים חשובים, גבה לפני עדכון.

---

## תהליך 1: פריסה דרך Git (Vercel / Netlify / Railway וכו')

אם הפרויקט מחובר ל־Git והענן מושך משם אוטומטית:

1. **Commit** של כל השינויים:
   ```bash
   git add .
   git status
   git commit -m "עדכון: רפקטור, תיקוני באגים, תמיכה ב-actionPlan"
   ```

2. **Push** ל־remote (GitHub / GitLab וכו'):
   ```bash
   git push origin main
   ```
   (החלף `main` ב־`master` או בשם ה־branch שהענן מושך ממנו.)

3. **הפריסה** – הפלטפורמה תריץ `build` ותעדכן את האתר אוטומטית. בדוק ב־Dashboard שהבנייה הצליחה.

---

## תהליך 2: פריסה ידנית (שרת / FTP / פאנל)

אם אתה מעלה קבצים ידנית או מריץ build על שרת:

1. **בניית הפרויקט** במחשב שלך:
   ```bash
   npm install
   npm run build
   ```

2. **העלאה לענן:**
   - **אם יש לך גישה ל־SSH לשרת:** העלה את כל תיקיית הפרויקט (או רק את מה שהשתנה), ואז על השרת:
     ```bash
     npm install --production
     npm run build
     npm run start
     ```
   - **אם מעלים רק קבצים (FTP/פאנל):** העלה את **כל** התוכן של התיקייה `.next` (אחרי `npm run build`) יחד עם `package.json`, `next.config.js`, `public` וכל קבצי ה־app/lib/components. על השרת צריך גם `node_modules` (או להריץ שם `npm install`) ולהריץ `npm run start`.

3. **הפעלת האפליקציה** – וודא שהתהליך שרץ הוא `npm run start` (פורט 3000 או מה שהגדרת).

---

## אחרי העדכון

1. **בדיקה:** גלוש לכתובת האתר, התחבר (אם יש login), התחל שיחה ובדוק שהפרלמנט מגיב ושאין Internal Server Error.
2. **לוגים:** אם משהו נכשל, בדוק לוגים בפלטפורמת הפריסה (Vercel/Netlify/שרת) או הרץ מקומית `npm run build` ו־`npm run start` כדי לראות שגיאות.

---

## סיכום מהיר

| איך הפריסה עובדת אצלך? | מה לעשות |
|-------------------------|----------|
| Git → Vercel/Netlify/דומה | `git add .` → `git commit -m "עדכון"` → `git push` |
| שרת / העלאה ידנית      | `npm run build` → העלאת הפרויקט (כולל `.next`) → על השרת `npm run start` |

אם תכתוב באיזו פלטפורמה אתה (Vercel, שרת פרטי, וכו') אפשר להתאים את הצעדים בדיוק אליך.
