# Parliament App - אפליקציית הפרלמנט

אפליקציית Web ב-Next.js שמאפשרת לנהל דיאלוג רב-סיבובי עם 8 סוכני AI ("חברי פרלמנט") באמצעות OpenAI.

## ⚙️ הגדרה ראשונית

### 1. הגדרת OpenAI API Key

**חשוב:** האפליקציה משתמשת ב-OpenAI, ולכן צריך מפתח API.

1. **קבלת מפתח API:**
   - היכנס ל: https://platform.openai.com/api-keys
   - התחבר לחשבון שלך (או צור חשבון חדש)
   - לחץ על "Create new secret key"
   - העתק את המפתח (זה המפתח היחיד שתראה אותו!)

2. **הדבקת המפתח בקובץ `.env.local`:**
   - פתח את הקובץ `.env.local` בתיקיית הפרויקט (נוצר אוטומטית)
   - מצא את השורה: `OPENAI_API_KEY=your-api-key-here`
   - החלף את `your-api-key-here` במפתח שהעתקת
   - שמור את הקובץ (Ctrl+S)

**דוגמה:**
אם המפתח שלך הוא `sk-abc123xyz...`, הקובץ צריך להיראות כך:
```
OPENAI_API_KEY=sk-abc123xyz...
```

**⚠️ חשוב:**
- אל תשתף את המפתח שלך עם אף אחד!
- הקובץ `.env.local` כבר מוגדר ב-`.gitignore` ולא יועלה ל-Git

## 🚀 התחלה מהירה - השיטה הקלה ביותר!

**יש לך 4 קבצים שאפשר להשתמש בהם:**

### שיטה 1: קבצי PowerShell (מומלץ!)
**לחץ ימני על הקובץ:** `1-התקן.ps1` → בחר **"Run with PowerShell"**

אם Windows שואל אם אתה רוצה להריץ, לחץ **"Yes"** או **"הפעל"**.

**⏱️ זה יכול לקחת 2-3 דקות - זה נורמלי!**

אחרי שההתקנה מסתיימת, לחץ ימני על `2-הרץ-שרת.ps1` → **"Run with PowerShell"**

### שיטה 2: קבצי Batch (אם PowerShell לא עובד)
**לחץ פעמיים על:** `1-התקן.bat`

אם Windows שואל אם אתה רוצה להריץ, לחץ **"More info"** → **"Run anyway"**

### שיטה 3: שיטה ידנית (אם שום דבר לא עובד)

### צעד ראשון - התקנת התלויות

**פתח Command Prompt (cmd) והפעל:**

```bash
npm install
```

פקודה זו תוריד ותתקין את כל הקבצים שהפרויקט צריך כדי לעבוד.

**⏱️ זה יכול לקחת 2-3 דקות - זה נורמלי!**

### צעד שני - הרצת השרת

אחרי שההתקנה הסתיימה, הפעל:

```bash
npm run dev
```

**אם הכל עובד, תראה הודעה כמו:**
```
  ▲ Next.js 14.2.5
  - Local:        http://localhost:3000
```

## צעד שלישי - פתיחת האתר בדפדפן

1. פתח את הדפדפן שלך (Chrome, Edge, Firefox וכו')
2. כתוב בשורת הכתובת: `http://localhost:3000`
3. לחץ Enter

**אם הכל עובד, תראה את הטקסט: "Parliament App – Hello"**

## בדיקת ה-Backend

כדי לבדוק שה-backend עובד, פתח בדפדפן:
`http://localhost:3000/api/health`

**אם הכל עובד, תראה משהו כמו:**
```json
{
  "status": "ok",
  "message": "Server is running!",
  "timestamp": "2026-01-26T..."
}
```

## עצירת השרת

כדי לעצור את השרת, לחץ `Ctrl + C` בחלון ה-Terminal.

## פקודות שימושיות

- `npm install` - התקנת/עדכון תלויות
- `npm run dev` - הרצת השרת במצב פיתוח
- `npm run build` - בניית הפרויקט לייצור
- `npm run start` - הרצת השרת במצב ייצור (אחרי build)

## מבנה הפרויקט

```
parliament-app/
├── app/
│   ├── api/
│   │   ├── chat/
│   │   │   └── route.ts    # API לדיאלוג רב-סיבובי
│   │   ├── chair/
│   │   │   └── route.ts    # API לסיכום יו"ר הפרלמנט
│   │   ├── ask/
│   │   │   └── route.ts    # API ישן (לא בשימוש)
│   │   └── health/
│   │       └── route.ts    # Backend endpoint לבדיקת תקינות
│   ├── layout.tsx          # תבנית בסיסית לכל הדפים
│   ├── page.tsx            # דף הבית - צ'אט רב-סיבובי
│   └── globals.css         # עיצוב כללי
├── lib/
│   ├── agents.ts           # הגדרת 8 המומחים עם system-prompts
│   ├── chat-state.ts       # ניהול היסטוריית שיחה (in-memory)
│   ├── orchestrator.ts     # ניהול מי מדבר מתי
│   ├── config.ts            # הגדרות OpenAI
│   └── types.ts            # TypeScript types
├── .env.local.example      # דוגמה לקובץ הגדרות
├── 1-התקן.ps1              # קובץ התקנה PowerShell
├── 1-התקן.bat              # קובץ התקנה Batch
├── 2-הרץ-שרת.ps1           # קובץ הרצת שרת PowerShell
├── 2-הרץ-שרת.bat           # קובץ הרצת שרת Batch
├── package.json            # רשימת התלויות
├── tsconfig.json           # הגדרות TypeScript
├── next.config.js          # הגדרות Next.js
└── README.md              # הקובץ הזה
```

## איך זה עובד?

האפליקציה מנהלת דיאלוג רב-סיבובי:

1. **שיחה חדשה** - המשתמש מתחיל שיחה חדשה
2. **שליחת הודעה** - המשתמש שולח הודעה לפרלמנט
3. **Orchestrator** - מחליט אילו מומחים (1-3) צריכים לדבר עכשיו
4. **תגובות מומחים** - כל מומחה שואל שאלות ממוקדות בסגנון שלו
5. **סיכום יו"ר** - המשתמש יכול לבקש סיכום מיו"ר הפרלמנט

כל השיחה נשמרת בהיסטוריה, והמומחים מתייחסים למה שכבר נאמר.

## בעיות נפוצות

**אם הקבצים לא עובדים (לא קורה כלום):**
- Windows חוסם לפעמים קבצים .bat/.ps1
- נסה: לחץ ימני על הקובץ → "Run with PowerShell" או "Run as administrator"
- או השתמש בשיטה הידנית (ראה למעלה)

**אם npm install לא עובד:**
- ודא שיש לך Node.js מותקן. הורד מ: https://nodejs.org/
- נסה: `npm install --legacy-peer-deps`

**אם השרת לא עולה:**
- ודא שאין תהליך אחר שרץ על פורט 3000
- נסה לסגור את כל חלונות ה-Terminal ולפתוח מחדש

**אם יש שגיאות OpenAI:**
- ודא ש-OPENAI_API_KEY מוגדר ב-.env.local
- ודא שיש לך קרדיט ב-OpenAI account
- בדוק את ה-console לפרטי השגיאה

**אם יש שגיאות אחרות:**
- שלח את הודעת השגיאה ואני אעזור לך לפתור!
